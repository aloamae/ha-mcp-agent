# =====================================
# DASHBOARD CHAUFFAGE COMPLET
# =====================================
# Ã€ copier dans l'Ã©diteur de dashboard Lovelace

type: vertical-stack
cards:
  # =====================================
  # CARTE 1: VUE D'ENSEMBLE PRIORITÃ‰S
  # =====================================
  - type: markdown
    title: ðŸŽ¯ SystÃ¨me de PrioritÃ©s Actif
    content: |
      {% set vacances = is_state('input_boolean.mode_vacance', 'on') %}
      {% set humidite_cuisine = is_state('input_boolean.mode_humidite_cuisine', 'on') %}
      {% set humidite_parents = is_state('input_boolean.mode_humidite_parents', 'on') %}
      {% set humidite_loann = is_state('input_boolean.mode_humidite_loann', 'on') %}
      {% set humidite_salon = is_state('input_boolean.mode_humidite_salon', 'on') %}
      {% set humidite_axel = is_state('input_boolean.mode_humidite_axel', 'on') %}
      {% set humidite_maeva = is_state('input_boolean.mode_humidite_maeva', 'on') %}
      {% set humidite_active = humidite_cuisine or humidite_parents or humidite_loann or humidite_salon or humidite_axel or humidite_maeva %}
      {% set mode_cuisine = states('input_select.mode_chauffage_cuisine') %}
      {% set mode_parents = states('input_select.mode_chauffage_parents') %}
      {% set mode_loann = states('input_select.mode_chauffage_loann') %}
      {% set mode_salon = states('input_select.mode_chauffage_salon') %}
      {% set mode_axel = states('input_select.mode_chauffage_axel') %}
      {% set mode_maeva = states('input_select.mode_chauffage_maeva') %}
      {% set manuel_actif = mode_cuisine not in ['MODEJOUR', 'STOP'] or mode_parents not in ['MODEJOUR', 'STOP'] or mode_loann not in ['MODEJOUR', 'STOP'] or mode_salon not in ['MODEJOUR', 'STOP'] or mode_axel not in ['MODEJOUR', 'STOP'] or mode_maeva not in ['MODEJOUR', 'STOP'] %}
      {% set planning_actif = mode_cuisine == 'MODEJOUR' or mode_parents == 'MODEJOUR' or mode_loann == 'MODEJOUR' or mode_salon == 'MODEJOUR' or mode_axel == 'MODEJOUR' or mode_maeva == 'MODEJOUR' %}
      {% set stop_actif = mode_cuisine == 'STOP' or mode_parents == 'STOP' or mode_loann == 'STOP' or mode_salon == 'STOP' or mode_axel == 'STOP' or mode_maeva == 'STOP' %}

      {% if vacances %}
      ## ðŸŸ¢ 1ï¸âƒ£ MODE VACANCES ACTIF
      â†’ Chauffage Ã  16Â°C (hors-gel)
      â†’ Planning et modes manuels dÃ©sactivÃ©s
      {% else %}
      ## âšª 1ï¸âƒ£ Mode Vacances (Inactif)
      {% endif %}

      {% if humidite_active %}
      ## ðŸŸ¢ 2ï¸âƒ£ MODE HUMIDITÃ‰ ACTIF
      â†’ Boost +2Â°C sur piÃ¨ces concernÃ©es:
      {% if humidite_cuisine %}- âœ… Cuisine{% endif %}
      {% if humidite_parents %}- âœ… Parents{% endif %}
      {% if humidite_loann %}- âœ… Loann{% endif %}
      {% if humidite_salon %}- âœ… Salon{% endif %}
      {% if humidite_axel %}- âœ… Axel{% endif %}
      {% if humidite_maeva %}- âœ… Maeva{% endif %}
      {% else %}
      ## âšª 2ï¸âƒ£ Mode HumiditÃ© (Inactif)
      {% endif %}

      {% if manuel_actif %}
      ## ðŸŸ¢ 3ï¸âƒ£ MODE MANUEL ACTIF
      â†’ ContrÃ´le individuel par piÃ¨ce
      {% if mode_cuisine not in ['MODEJOUR', 'STOP'] %}- Cuisine: {{ mode_cuisine }}{% endif %}
      {% if mode_parents not in ['MODEJOUR', 'STOP'] %}- Parents: {{ mode_parents }}{% endif %}
      {% if mode_loann not in ['MODEJOUR', 'STOP'] %}- Loann: {{ mode_loann }}{% endif %}
      {% if mode_salon not in ['MODEJOUR', 'STOP'] %}- Salon: {{ mode_salon }}{% endif %}
      {% if mode_axel not in ['MODEJOUR', 'STOP'] %}- Axel: {{ mode_axel }}{% endif %}
      {% if mode_maeva not in ['MODEJOUR', 'STOP'] %}- Maeva: {{ mode_maeva }}{% endif %}
      {% else %}
      ## âšª 3ï¸âƒ£ Mode Manuel (Inactif)
      {% endif %}

      {% if planning_actif and not vacances %}
      ## ðŸŸ¢ 4ï¸âƒ£ MODE PLANNING ACTIF
      â†’ PiÃ¨ces en MODEJOUR suivent le planning
      {% if mode_cuisine == 'MODEJOUR' %}- âœ… Cuisine{% endif %}
      {% if mode_parents == 'MODEJOUR' %}- âœ… Parents{% endif %}
      {% if mode_loann == 'MODEJOUR' %}- âœ… Loann{% endif %}
      {% if mode_salon == 'MODEJOUR' %}- âœ… Salon{% endif %}
      {% if mode_axel == 'MODEJOUR' %}- âœ… Axel{% endif %}
      {% if mode_maeva == 'MODEJOUR' %}- âœ… Maeva{% endif %}
      {% else %}
      ## âšª 4ï¸âƒ£ Mode Planning (Inactif)
      {% endif %}

      {% if planning_actif %}
      ## ðŸŸ¢ 5ï¸âƒ£ MODE GLOBAL: {{ states('input_number.mode_chauffage_global') }}Â°C
      â†’ TempÃ©rature de rÃ©fÃ©rence pour piÃ¨ces en MODEJOUR
      {% else %}
      ## âšª 5ï¸âƒ£ Mode Global (Non utilisÃ©)
      {% endif %}

      {% if stop_actif %}
      ## ðŸŸ¡ 6ï¸âƒ£ CHAUFFAGE COUPÃ‰ (STOP)
      {% if mode_cuisine == 'STOP' %}- â›” Cuisine{% endif %}
      {% if mode_parents == 'STOP' %}- â›” Parents{% endif %}
      {% if mode_loann == 'STOP' %}- â›” Loann{% endif %}
      {% if mode_salon == 'STOP' %}- â›” Salon{% endif %}
      {% if mode_axel == 'STOP' %}- â›” Axel{% endif %}
      {% if mode_maeva == 'STOP' %}- â›” Maeva{% endif %}
      {% else %}
      ## ðŸŸ¢ 6ï¸âƒ£ PILOTAGE ACTIF
      â†’ Cycle automatique toutes les 3 minutes
      {% endif %}

  # =====================================
  # CARTE 2: PLANNING DE LA JOURNÃ‰E
  # =====================================
  - type: markdown
    title: ðŸ“… Planning de la JournÃ©e
    content: |
      {% set heure = now().hour %}
      {% set minute = now().minute %}
      {% set temps = heure * 60 + minute %}
      {% set matin = 5 * 60 + 45 %}
      {% set journee = 8 * 60 %}
      {% set soir = 17 * 60 %}
      {% set nuit = 22 * 60 + 30 %}

      {% if temps >= matin and temps < journee %}
      ## ðŸŸ¢ ACTUELLEMENT: Confort Matin (05:45-08:00)
      â†’ TempÃ©rature: **19Â°C**
      â†’ Toutes piÃ¨ces en mode confort
      {% elif temps >= journee and temps < soir %}
      ## ðŸŸ¢ ACTUELLEMENT: Ã‰co JournÃ©e (08:00-17:00)
      â†’ TempÃ©rature: **17Â°C**
      â†’ Ã‰conomie d'Ã©nergie (maison vide)
      {% elif temps >= soir and temps < nuit %}
      ## ðŸŸ¢ ACTUELLEMENT: Confort Soir (17:00-22:30)
      â†’ TempÃ©rature: **19Â°C**
      â†’ Retour Ã  la maison, confort
      {% else %}
      ## ðŸŸ¢ ACTUELLEMENT: Hors-Gel Nuit (22:30-05:45)
      â†’ TempÃ©rature: **17Â°C**
      â†’ Ã‰conomie nocturne
      {% endif %}

      ---

      ### ðŸ• Programme Complet:
      - **05:45** - Confort Matin â†’ 19Â°C
      - **08:00** - Ã‰co JournÃ©e â†’ 17Â°C âš¡
      - **17:00** - Confort Soir â†’ 19Â°C
      - **22:30** - Hors-Gel Nuit â†’ 17Â°C ðŸŒ™

  # =====================================
  # CARTE 3: CONTRÃ”LE MODE GLOBAL
  # =====================================
  - type: entities
    title: ðŸŽ›ï¸ ContrÃ´le Mode Global
    show_header_toggle: false
    entities:
      - entity: input_number.mode_chauffage_global
        name: ðŸŒ¡ï¸ TempÃ©rature Globale
      - entity: sensor.mode_chauffage_global_temperature
        name: ðŸ“Š Mode Global (Lecture)
      - type: divider
      - entity: input_boolean.mode_vacance
        name: ðŸ–ï¸ Mode Vacances

  # =====================================
  # CARTE 4: Ã‰TAT CUISINE (GAZ)
  # =====================================
  - type: entities
    title: ðŸ³ Cuisine (GAZ)
    show_header_toggle: false
    entities:
      - entity: input_select.mode_chauffage_cuisine
        name: ðŸŽ›ï¸ Mode
      - entity: sensor.th_cuisine_temperature
        name: ðŸŒ¡ï¸ TempÃ©rature
      - entity: sensor.th_cuisine_humidity
        name: ðŸ’§ HumiditÃ©
      - entity: input_boolean.mode_humidite_cuisine
        name: ðŸš€ Boost HumiditÃ© (+2Â°C)

  # =====================================
  # CARTE 5: Ã‰TAT PARENTS (GAZ)
  # =====================================
  - type: entities
    title: ðŸ›ï¸ Chambre Parents (GAZ)
    show_header_toggle: false
    entities:
      - entity: input_select.mode_chauffage_parents
        name: ðŸŽ›ï¸ Mode
      - entity: sensor.th_parents_temperature
        name: ðŸŒ¡ï¸ TempÃ©rature
      - entity: sensor.th_parents_humidity
        name: ðŸ’§ HumiditÃ©
      - entity: input_boolean.mode_humidite_parents
        name: ðŸš€ Boost HumiditÃ© (+2Â°C)

  # =====================================
  # CARTE 6: Ã‰TAT LOANN (GAZ)
  # =====================================
  - type: entities
    title: ðŸŽ® Chambre Loann (GAZ)
    show_header_toggle: false
    entities:
      - entity: input_select.mode_chauffage_loann
        name: ðŸŽ›ï¸ Mode
      - entity: sensor.th_loann_temperature
        name: ðŸŒ¡ï¸ TempÃ©rature
      - entity: sensor.th_loann_humidity
        name: ðŸ’§ HumiditÃ©
      - entity: input_boolean.mode_humidite_loann
        name: ðŸš€ Boost HumiditÃ© (+2Â°C)

  # =====================================
  # CARTE 7: Ã‰TAT SALON (CLIM)
  # =====================================
  - type: entities
    title: ðŸ›‹ï¸ Salon (Climatisation)
    show_header_toggle: false
    entities:
      - entity: input_select.mode_chauffage_salon
        name: ðŸŽ›ï¸ Mode
      - entity: climate.climatisation_salon
        name: â„ï¸ Climatisation
      - entity: sensor.th_salon_humidity
        name: ðŸ’§ HumiditÃ©
      - entity: input_boolean.mode_humidite_salon
        name: ðŸš€ Boost HumiditÃ© (+2Â°C)

  # =====================================
  # CARTE 8: Ã‰TAT AXEL (CLIM)
  # =====================================
  - type: entities
    title: ðŸŽ¸ Chambre Axel (Climatisation)
    show_header_toggle: false
    entities:
      - entity: input_select.mode_chauffage_axel
        name: ðŸŽ›ï¸ Mode
      - entity: climate.climatisation_axel
        name: â„ï¸ Climatisation
      - entity: sensor.th_axel_humidity
        name: ðŸ’§ HumiditÃ©
      - entity: input_boolean.mode_humidite_axel
        name: ðŸš€ Boost HumiditÃ© (+2Â°C)

  # =====================================
  # CARTE 9: Ã‰TAT MAEVA (CLIM)
  # =====================================
  - type: entities
    title: ðŸ‘§ Chambre Maeva (Climatisation)
    show_header_toggle: false
    entities:
      - entity: input_select.mode_chauffage_maeva
        name: ðŸŽ›ï¸ Mode
      - entity: climate.climatisation_maeva
        name: â„ï¸ Climatisation
      - entity: sensor.th_maeva_humidity
        name: ðŸ’§ HumiditÃ©
      - entity: input_boolean.mode_humidite_maeva
        name: ðŸš€ Boost HumiditÃ© (+2Â°C)

  # =====================================
  # CARTE 10: GUIDE UTILISATEUR
  # =====================================
  - type: markdown
    title: ðŸ“– Guide Utilisateur Simple
    content: |
      ## ðŸ  Je suis prÃ©sent
      â†’ Je choisis le **mode Manuel** pour chaque piÃ¨ce
      â†’ Je sÃ©lectionne la tempÃ©rature souhaitÃ©e (Confort, Eco, etc.)
      â†’ Exemple: Salon Ã  Confort3(21Â°C), Chambres Ã  Eco(18Â°C)

      ## âš¡ J'Ã©conomise l'Ã©nergie
      â†’ Je mets les piÃ¨ces inutilisÃ©es Ã  **Hors-Gel2(17Â°C)**
      â†’ Ou je les mets en **STOP** pour couper complÃ¨tement

      ## ðŸ–ï¸ Je pars en vacances
      â†’ J'active le **Mode Vacances**
      â†’ Tout le chauffage passe automatiquement Ã  16Â°C (hors-gel)
      â†’ Le planning est dÃ©sactivÃ©

      ## ðŸ“… Je veux le planning automatique
      â†’ Je mets toutes les piÃ¨ces en **MODEJOUR**
      â†’ Le systÃ¨me suit automatiquement les 4 crÃ©neaux horaires:
        - 05:45 â†’ 19Â°C (Confort Matin)
        - 08:00 â†’ 17Â°C (Ã‰co JournÃ©e)
        - 17:00 â†’ 19Â°C (Confort Soir)
        - 22:30 â†’ 17Â°C (Hors-Gel Nuit)

      ## âŒ Je coupe le chauffage
      â†’ Je mets les piÃ¨ces en **STOP**
      â†’ Le chauffage est complÃ¨tement coupÃ© pour ces piÃ¨ces

      ## ðŸ’§ Boost HumiditÃ© Automatique
      â†’ Si l'humiditÃ© dÃ©passe 61% dans une piÃ¨ce
      â†’ Le systÃ¨me ajoute automatiquement +2Â°C
      â†’ Retour normal quand l'humiditÃ© redescend

  # =====================================
  # CARTE 11: Ã‰TAT CHAUDIÃˆRE GAZ
  # =====================================
  - type: entities
    title: ðŸ”¥ Ã‰tat ChaudiÃ¨re GAZ
    show_header_toggle: false
    entities:
      - entity: switch.thermostat
        name: ðŸ”¥ ChaudiÃ¨re
      - type: divider
      - type: section
        label: TempÃ©ratures PiÃ¨ces GAZ
      - entity: sensor.th_cuisine_temperature
        name: Cuisine
      - entity: sensor.th_parents_temperature
        name: Parents
      - entity: sensor.th_loann_temperature
        name: Loann
